onmessage=function(t){function a(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var l=t.data.rootUrl+"/products/"+t.data.handleProduct+"?view=jsfull",s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var t=JSON.parse(s.responseText.replace(/<!--.*?-->/g,"")),a={pId:t.id,pJson:t,html:i(t),variant:n(t)};postMessage(a)}else console.log("An error occurred during your request: "+s.status+" "+s.statusText)},s.open("Get",l),s.send();var n=function(a){var l=a.variants.find(function(t){return!0===t.available});return void 0===l&&(l=a.variants[0]),null!==t.data.currentVariant&&(l=a.variants.find(function(a){return a.id===parseInt(t.data.currentVariant)})),l},i=function(l){var s=l.options&&l.options[0]?l.options[0]:null,i="",o=[],e=[],p=l.options&&l.options[1]?l.options[1]:null,r="",d=[],c=l.options&&l.options[2]?l.options[2]:null,u="",v=[],_=t.data.prdOptsStyle,h=_.find(function(t){return t.name==s}),g=_.find(function(t){return t.name==p}),f=_.find(function(t){return t.name==c}),m=n(l);l.variants.forEach(function(t){var l=void 0!==h&&h.color_watched&&"image_variant"==h.sw_style?" bg-contain":"";if(-1===o.indexOf(t.option1)){o.push(t.option1);var s=m.options[0]===t.option1?" active":"",n=o.length>5,_=t.options_handle[0],y=null!==(S=t.featured_image?t.featured_image.src:null)?S.split(".")[S.split(".").length-1]:null,$=null!==S&&void 0!==h&&h.color_watched&&"color"!==h.sw_style?"style=\"background-image: url('"+S.replace("."+y,"_100x100_crop_center."+y).replace(/http(s)?:/,"")+"')\"":"";""==_&&(_=t.option1),i+=`<li class="swatch-on-grid _${_}${s}" title="${a(t.option1)}" data-available="${t.available}" data-maybe-hide="${n}">`+`<span class="swatch${l}" data-vrs="kt_${_}" data-opt="Opt1Js" data-vrid="${t.id}" data-toggle="tooltip" title="${a(t.option1)}" ${$}>`+`<span class="swatch-title">${t.option1}</span>`+"</span></li>"}if(-1!==o.indexOf(m.options[0])&&(-1===e.indexOf(t.option1)&&e.push(t.option1),null!==p&&e[0]===t.option1&&-1===e.indexOf(t.option2)&&e.push(t.option2),null!==c&&e[1]===t.option2&&-1===e.indexOf(t.option3)&&e.push(t.option3)),null!==p&&-1===d.indexOf(t.option2)&&-1!==e.indexOf(t.option2)){d.push(t.option2);var w=m.options[1]===t.option2?" active":"",O=d.length>5,x=t.options_handle[1];""==x&&(x=t.option2);var y=null!==(S=t.featured_image?t.featured_image.src:null)?S.split(".")[S.split(".").length-1]:null,$=null!==S&&void 0!==g&&g.color_watched&&"color"!==g.sw_style?"style=\"background-image: url('"+S.replace("."+y,"_100x100_crop_center."+y).replace(/http(s)?:/,"")+"')\"":"";r+=`<li class="swatch-on-grid _${x}${w}" title="${a(t.option2)}" data-available="${t.available}" data-maybe-hide="${O}">`+`<span class="swatch${l}" data-vrs="kt_${x}" data-opt="Opt1Js" data-vrid="${t.id}" data-toggle="tooltip" title="${a(t.option2)}" ${$}>`+`<span class="swatch-title">${t.option2}</span>`+"</span></li>"}if(null!==c&&-1===v.indexOf(t.option3)&&-1!==e.indexOf(t.option3)){v.push(t.option3);var b=m.options[2]===t.option3?" active":"",J=v.length>5,k=t.options_handle[2];""==k&&(k=t.option3);var S=t.featured_image?t.featured_image.src:null,y=null!==S?S.split(".")[S.split(".").length-1]:null,$=null!==S&&void 0!==f&&f.color_watched&&"color"!==f.sw_style?"style=\"background-image: url('"+S.replace("."+y,"_100x100_crop_center."+y).replace(/http(s)?:/,"")+"')\"":"";u+=`<li class="swatch-on-grid _${k}${b}" title="${a(t.option3)}" data-available="${t.available}" data-maybe-hide="${J}">`+`<span class="swatch${l}" data-vrs="kt_${k}" data-opt="Opt1Js" data-vrid="${t.id}" data-toggle="tooltip" title="${a(t.option3)}" ${$}>`+`<span class="swatch-title">${t.option3}</span>`+"</span></li>"}});var y='<li class="swatch-on-grid more kt__quick-shop" data-view="'+l.url+'" data-vrid="'+m.id+'" data-pid="'+l.id+'"><span class="swatch"><span class="swatch-title">'+t.data.moreText+"+</span></span> </li>";if(o.length>0)if(o.length>5&&(i+=y),void 0!==h){var $=1===o.length?" one-option":"";i='<ul class="product-loop-variants variants '+h.style+$+' list-unstyled" data-swatchesstyle="image_variant" data-usecolor="'+h.color_watched+'" data-opt="Opt1Js" data-n-opt="'+s+'"><li class="name_option">'+s+': <span class="n_selected">'+m.options[0]+'</span></li><li class="variants_list"><ul class="content__variants_list p-0">'+i+"</li></ul></ul>"}else i='<ul class="product-loop-variants variants '+t.data.prdDefaultStyle+' list-unstyled" data-swatchesstyle="image_variant" data-usecolor="false" data-opt="Opt1Js" data-n-opt="'+s+'"><li class="name_option">'+s+':</li><li class="variants_list"><ul class="content__variants_list p-0">'+i+"</li></ul></ul>";if(d.length>0)if(d.length>5&&(r+=y),void 0!==g){var w=1===d.length?" one-option":"";r='<ul class="product-loop-variants variants '+g.style+w+' list-unstyled" data-swatchesstyle="image_variant" data-usecolor="'+g.color_watched+'" data-opt="Opt2Js" data-n-opt="'+p+'"><li class="name_option">'+p+': <span class="n_selected">'+m.options[1]+'</span></li><li class="variants_list"><ul class="content__variants_list p-0">'+r+"</li></ul></ul>"}else r='<ul class="product-loop-variants variants '+t.data.prdDefaultStyle+' list-unstyled" data-swatchesstyle="image_variant" data-usecolor="false" data-opt="Opt2Js" data-n-opt="'+p+'"><li class="name_option">'+p+':</li><li class="variants_list"><ul class="content__variants_list p-0">'+r+"</li></ul></ul>";if(v.length>0)if(v.length>5&&(u+=y),void 0!==f){var O=1===d.length?" one-option":"";u='<ul class="product-loop-variants variants '+f.style+O+' list-unstyled" data-swatchesstyle="image_variant" data-usecolor="'+f.color_watched+'" data-opt="Opt3Js" data-n-opt="'+c+'"><li class="name_option">'+c+': <span class="n_selected">'+m.options[2]+'</span></li><li class="variants_list"><ul class="content__variants_list p-0">'+u+"</li></ul></ul>"}else u='<ul class="product-loop-variants variants '+t.data.prdDefaultStyle+' list-unstyled" data-swatchesstyle="image_variant" data-usecolor="false" data-opt="Opt3Js" data-n-opt="'+c+'"><li class="name_option">'+c+':</li><li class="variants_list"><ul class="content__variants_list p-0">'+u+"</li></ul></ul>";var x='<input type="hidden" name="quantity" value="1"><input type="hidden" name="id" value="'+m.id+'">';return options={option1:i,option2:r,option3:u,input:x}}};