function attributeToString(t){return"string"!=typeof t&&"undefined"==(t+="")&&(t=""),jQuery.trim(t)}void 0===window.Shopify&&(window.Shopify={}),Shopify.KT_onError=function(e,t){$(".btn.loading, .kt-button.loading").removeClass("loading");var n=eval("("+e.responseText+")");n.message?alert(n.message+"("+n.status+"): "+n.description):alert("Error : "+Shopify.KT_fullMessagesFromErrors(n).join("; ")+"."),n.message},Shopify.KT_fullMessagesFromErrors=function(t){var a=[];return jQuery.each(t,function(t,e){jQuery.each(e,function(e,o){a.push(t+" "+o)})}),a},Shopify.KT_onCartUpdate=function(t,a){Shopify.KT_onCartUpdate_(t,a)},Shopify.KT_onItemAdded=function(t){Shopify.KT_getCart()},Shopify.KT_addItem=function(t,a,e){var o=t,a=a||1,n={type:"POST",url:Shopify.root_url+"/cart/add.js",data:"quantity="+a+"&id="+t,dataType:"json",success:function(t){"function"==typeof e?e(o,t):Shopify.KT_onItemAdded(t)},error:function(t,a){Shopify.KT_onError(t,a)}};jQuery.ajax(n)},Shopify.KT_addItems=function(t,a){var e={type:"POST",url:Shopify.root_url+"/cart/add.js",data:{items:t},dataType:"json",success:function(e){"function"==typeof a?a(t):Shopify.KT_onItemAdded(e)},error:function(t,a){Shopify.KT_onError(t,a)}};jQuery.ajax(e)},Shopify.KT_addItemFromForm=function(t,a){var e={type:"POST",url:Shopify.root_url+"/cart/add.js",data:jQuery("#"+t).serialize(),dataType:"json",success:function(t){"function"==typeof a?a(t):Shopify.KT_onItemAdded(t)},error:function(t,a){Shopify.KT_onError(t,a)}};jQuery.ajax(e)},Shopify.KT_addItemsFromForm=function(a){var e={type:"POST",url:Shopify.root_url+"/cart/update.js",data:$(a).serialize(),dataType:"json",success:function(a){"function"==typeof t?t(a):Shopify.KT_onCartUpdate(a)},error:function(t,a){Shopify.KT_onError(t,a)}};jQuery.ajax(e)},Shopify.KT_getCart=function(t){jQuery.getJSON(Shopify.root_url+"/cart.js",function(a,e){"function"==typeof t?t(a):Shopify.KT_onCartUpdate(a)})},Shopify.KT_changeItem=function(t,a,e){var o=t,n={type:"POST",url:Shopify.root_url+"/cart/change.js",data:"quantity="+a+"&id="+t,dataType:"json",success:function(t){"function"==typeof e?e(o,t):Shopify.KT_onCartUpdate(t)},error:function(t,a){Shopify.KT_onError(t,a)}};jQuery.ajax(n)},Shopify.KT_removeItem=function(t,a){var e=t,o={type:"POST",url:Shopify.root_url+"/cart/change.js",data:"quantity=0&id="+t,dataType:"json",success:function(t){"function"==typeof a?a(e,t,"remove item"):Shopify.KT_onCartUpdate(t,"remove item")},error:function(t,a){Shopify.KT_onError(t,a)}};jQuery.ajax(o)},Shopify.KT_clear=function(t){var a={type:"POST",url:Shopify.root_url+"/cart/clear.js",data:"",dataType:"json",success:function(a){"function"==typeof t?t(a):Shopify.KT_onCartUpdate(a)},error:function(t,a){Shopify.KT_onError(t,a)}};jQuery.ajax(a)},Shopify.KT_updateCartAttributes=function(t,a){var e="";jQuery.isArray(t)?jQuery.each(t,function(t,a){var o=attributeToString(a.key);""!==o&&(e+="attributes["+o+"]="+attributeToString(a.value)+"&")}):"object"==typeof t&&null!==t&&jQuery.each(t,function(t,a){e+="attributes["+attributeToString(t)+"]="+attributeToString(a)+"&"});var o={type:"POST",url:Shopify.root_url+"/cart/update.js",data:e,dataType:"json",success:function(t){"function"==typeof a?a(t):Shopify.KT_onCartUpdate(t)},error:function(t,a){Shopify.KT_onError(t,a)}};jQuery.ajax(o)},Shopify.KT_updateCartNote=function(t,a){var e={type:"POST",url:Shopify.root_url+"/cart/update.js",data:"note="+attributeToString(t),dataType:"json",success:function(t){"function"==typeof a?a(t):Shopify.KT_onCartUpdate(t),""!==t.note?$('[data-tab-content="tab-floating-note"]').addClass("has-data"):$('[data-tab-content="tab-floating-note"]').removeClass("has-data")},error:function(t,a){Shopify.KT_onError(t,a)}};jQuery.ajax(e)},Shopify.KT_updatedCartNote=function(t){$(".kt-button.loading").removeClass("loading"),$(".cart-offcanvas__content").removeClass("show-tab-floating"),$(".tab-floating-note").removeClass("active")},Shopify.KT_buildParams=function(t,a,e){jQuery.isArray(a)&&a.length?jQuery.each(a,function(a,o){rbracket.test(t)?e(t,o):Shopify.KT_buildParams(t+"["+("object"==typeof o||jQuery.isArray(o)?a:"")+"]",o,e)}):null!=a&&"object"==typeof a?Shopify.KT_isEmptyObject(a)?e(t,""):jQuery.each(a,function(a,o){Shopify.KT_buildParams(t+"["+a+"]",o,e)}):e(t,a)},Shopify.KT_isEmptyObject=function(t){for(var a in t)return!1;return!0},Shopify.KT_addGift=function(a){if($("[data-gift-auto-add]").length<=0)return!1;let e=JSON.parse($("[data-gift-auto-add]").html());if(!e&&!e.id)return!1;if(a.items.filter(t=>t.id==e.id).length){if(!(a.total_price<e.price_limit))return!1;Shopify.KT_removeItem(e.id)}if(!(a&&a.total_price>=e.price_limit))return!1;{let a={id:e.id,quantity:1};var o={type:"POST",url:Shopify.root_url+"/cart/add.js",data:a,dataType:"json",success:function(a){"function"==typeof t?t(a):Shopify.KT_onItemAdded(a)},error:function(t,a){Shopify.KT_onError(t,a)}};jQuery.ajax(o)}},$(document).on("click",".add-item-jx",function(t){t.preventDefault();var a=$(this),e=a.attr("data-vrid"),o=1,n=a.parents(".form-ajax--");a.find(".add-item-jx-text").attr("data-prev-text",a.find(".add-item-jx-text").text()).addClass("waitting-text-change"),n.length>0&&(n.find('[name="id"]').length>0&&(e=n.find('[name="id"]').val()),n.find('[name="quantity"]').length>0&&(o=n.find('[name="quantity"]').val())),Shopify.KT_addItem(e,o)}).on("click",".addItemsAjax",function(t){t.preventDefault();var a=$(this).attr("data-form");Shopify.KT_addItemsFromForm(a)}).on("click",".mini-cart .act-remove",function(t){t.preventDefault(),$(".mini-cart").addClass("loading"),Shopify.KT_removeItem($(this).data("vrid"))}).on("click",".cart-offcanvas .act-remove",function(t){t.preventDefault(),$(this).parents(".item__cart").find("input").val(0).trigger("change")}).on("submit","#upadteCartNote",function(t){t.preventDefault(),$(this).find(".kt-button").addClass("loading"),Shopify.KT_updateCartNote($("#upadteCartNote").find('textarea[name="note"]').val(),Shopify.KT_updatedCartNote)}).on("change","#gift-wrapping",function(t){t.preventDefault(),t.stopPropagation(),$(this).is(":checked")?$("#gift-wrap_product").val(1).trigger("change"):$("#gift-wrap_product").val(0).trigger("change")}).on("change","#upadteCartOffcanvas",function(t){t.preventDefault(),$(".content__cart-offcanvas").addClass("loading"),Shopify.KT_addItemsFromForm("#upadteCartOffcanvas")}),Shopify.KT_onCartUpdate_=function(t,a){if(0==window.location.pathname.indexOf(Shopify.root_url+"/cart"))return location.reload(),!1;if(0==Shopify.KT_addGift(t)){var e=$(".ajax__list-cart");$(".cartCount").text(t.item_count),$(".cartCountItemx").text("("+t.item_count+" "+(1==t.item_count?theme.strings.cartItemText:theme.strings.cartItemsText)+")"),$(".cartCost").attr("data-price",t.total_price).html(formatMoney_(t.items_subtotal_price)),t.items_subtotal_price!==t.total_price?$(".cartSubTotalWrap").show():$(".cartSubTotalWrap").hide(),$(".cartCostTotal").html(formatMoney_(t.total_price)),$(".title.has-item").html(1==t.item_count?theme.strings.cartItem.split("(")[0]+"("+t.item_count+" "+theme.strings.cartItemText+")"+theme.strings.cartItem.split(")")[1]:theme.strings.cartItems.split("(")[0]+"("+t.item_count+" "+theme.strings.cartItemsText+")"+theme.strings.cartItems.split(")")[1]),$(".btn.loading, .kt-button.loading").removeClass("loading"),$(".waitting-text-change").text(theme.strings.addedToCart),$(".mini-cart .icon-link").removeClass("load");if(!1===function(){var t=!1;return!1!==theme.function.sticky_icon_cart&&($(".cartCount:not(.fixed)").each(function(a,e){if(this.getBoundingClientRect().top>1&&(t=!0),e+1===$(".cartCount:not(.fixed)").length)return!1}),t)}()&&("drop"!==theme.function.type_ajax_cart&&"none"!==theme.function.type_ajax_cart||$("body").addClass("popIn")),"none"!==theme.function.type_ajax_cart){var o=Shopify.root_url+"/cart?view=listjsondrop";if("offcanvas"==theme.function.type_ajax_cart&&(o=Shopify.root_url+"/cart?view=listjson"),"popup"==theme.function.type_ajax_cart&&(o=Shopify.root_url+"/cart?view=listjsonpopup"),$("#address_country").length>0&&($("#address_country option").length<=0&&Shopify.Cart.getCountry(),void 0!==$(".get__shipping").attr("data-curr-address")&&t.item_count>0&&($(".get__shipping").show(),$("#address_country option").length>0))){var n=JSON.parse($(".get__shipping").attr("data-curr-address"));Shopify.Cart.getCartShippingRates(n,Shopify.Cart.getShippingCart,Shopify.Cart.onError)}$.ajax({type:"get",url:o,beforeSend:function(){t.item_count>0?$(".has-item").is(":hidden")&&($(".has-item").css({display:""}),$(".no-item").css({display:"none"})):$(".no-item").is(":hidden")&&($(".has-item").css({display:"none"}),$(".no-item").css({display:""})),$(".modal.show").modal("hide"),$(".offcanvas:not(.cart-offcanvas).show, #editOptsOffcanvas.show").offcanvas("hide")},success:function(o){$(".mini-cart").removeClass("load"),setTimeout(function(){$(".btn.adding").text(theme.strings.addToCart).removeClass("adding")},1e3);var n=o.split("\x3c!-- summary-discounts --\x3e");if(o=n[0],n[1]&&n[1].length>0?$(".summary-discounts").html(n[1]).removeClass("d-none"):$(".summary-discounts").html(n[1]).addClass("d-none"),e.html(o).removeClass("loading"),a||"offcanvas"!=theme.function.type_ajax_cart||$("#cartOffcanvas").offcanvas("show"),a||"popup"!=theme.function.type_ajax_cart||KT.popupOpen(),$(".spendFreeShip").length>0){var r=$(".spendFreeShip"),i=parseInt(r.find("[aria-valuemax]").attr("aria-valuemax")),s=r.find(".progress-bar");i>t.total_price?(s.attr("aria-valuenow",i-t.total_price).css("width",t.total_price/i*100+"%").text(Math.round(t.total_price/i*100)+"%"),r.find(".text_progress .add_more_price").html(theme.function.threshold_cart.replace("#more",formatMoney_(i-t.total_price))),r.removeClass("congratulations")):(s.attr("aria-valuenow",i).css("width","100%").text("100%"),r.addClass("congratulations"))}$(".title-ajax__cart").html(1==t.item_count?theme.strings.cartItem.split("(")[0]+"("+t.item_count+" "+theme.strings.cartItemText+")"+theme.strings.cartItem.split(")")[1]:theme.strings.cartItems.split("(")[0]+"("+t.item_count+" "+theme.strings.cartItemsText+")"+theme.strings.cartItems.split(")")[1]),$(".content__cart-offcanvas.loading, .mini-cart.loading").removeClass("loading")}})}}};